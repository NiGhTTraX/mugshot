<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.73">
<link rel="alternate" type="application/rss+xml" href="/mugshot/blog/rss.xml" title="Mugshot Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/mugshot/blog/atom.xml" title="Mugshot Blog Atom Feed"><title data-react-helmet="true">Usage | Mugshot</title><meta data-react-helmet="true" property="og:url" content="https://nighttrax.github.io/mugshot//mugshot/usage"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Usage | Mugshot"><meta data-react-helmet="true" name="description" content="TODO"><meta data-react-helmet="true" property="og:description" content="TODO"><link data-react-helmet="true" rel="shortcut icon" href="/mugshot/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://nighttrax.github.io/mugshot//mugshot/usage"><link data-react-helmet="true" rel="alternate" href="https://nighttrax.github.io/mugshot//mugshot/usage" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://nighttrax.github.io/mugshot//mugshot/usage" hreflang="x-default"><link rel="stylesheet" href="/mugshot/assets/css/styles.806b15bc.css">
<link rel="preload" href="/mugshot/assets/js/styles.0c8619d4.js" as="script">
<link rel="preload" href="/mugshot/assets/js/runtime~main.8df49d41.js" as="script">
<link rel="preload" href="/mugshot/assets/js/main.aece6680.js" as="script">
<link rel="preload" href="/mugshot/assets/js/1.82488164.js" as="script">
<link rel="preload" href="/mugshot/assets/js/2.3f3ff382.js" as="script">
<link rel="preload" href="/mugshot/assets/js/58.7d36461d.js" as="script">
<link rel="preload" href="/mugshot/assets/js/935f2afb.f52722d2.js" as="script">
<link rel="preload" href="/mugshot/assets/js/17896441.8570ccdb.js" as="script">
<link rel="preload" href="/mugshot/assets/js/6476eba6.08f5cd33.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_2vEk">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/mugshot/"><img src="/mugshot/img/logo.png" alt="Mugshot Logo" class="themedImage_2dpp themedImage--light_2yWi navbar__logo"><img src="/mugshot/img/logo.png" alt="Mugshot Logo" class="themedImage_2dpp themedImage--dark_2O_X navbar__logo"><strong class="navbar__title">Mugshot</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/mugshot/">Docs</a><a class="navbar__item navbar__link" href="/mugshot/api">API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/nighttrax/mugshot" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/mugshot/"><img src="/mugshot/img/logo.png" alt="Mugshot Logo" class="themedImage_2dpp themedImage--light_2yWi navbar__logo"><img src="/mugshot/img/logo.png" alt="Mugshot Logo" class="themedImage_2dpp themedImage--dark_2O_X navbar__logo"><strong class="navbar__title">Mugshot</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/mugshot/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/mugshot/api">API</a></li><li class="menu__list-item"><a href="https://github.com/nighttrax/mugshot" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_2hm3"><div class="docSidebarContainer_mF8j" role="complementary"><div class="sidebar_AUih"><div class="menu menu--responsive thin-scrollbar menu_16eN"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1r51" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/mugshot/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/mugshot/installation">Installation</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/mugshot/usage">Usage</a></li></ul></div></div></div><main class="docMainContainer_luF8"><div class="container padding-vert--lg docItemWrapper_12Bq"><div class="row"><div class="col docItemCol_1cpl"><div class="docItemContainer_1YW1"><article><header><h1 class="docTitle_eZEF">Usage</h1></header><div class="markdown"><p>If you have an existing testing suite then it will be straightforward to add Mugshot to it. If you&#x27;re starting from scratch then you can choose your favorite tools, Mugshot doesn&#x27;t impose anything on you like a test runner or a particular way to write the tests.</p><p>Mugshot expects you to setup the testing environment. For instance, if you&#x27;re planning to take screenshots of a website then you need to</p><ol><li>Open the browser.</li><li>Navigate to the website you want to test.</li><li>Interact with the UI (scroll, click a button, input some text in a form etc.).</li></ol><p>Once everything is set you just call <a href="/mugshot/api/classes/mugshot.mugshot-1#check"><code>Mugshot.check</code></a> and Mugshot will take care of taking a new screenshot, comparing it to the baseline, producing diffs and returning a passing or a failing result.</p><p>The following example illustrates the basics. It uses <a href="https://webdriver.io/" target="_blank" rel="noopener noreferrer">WebdriverIO</a> to control a browser and <a href="https://jestjs.io/" target="_blank" rel="noopener noreferrer">Jest</a> to run the test:</p><div class="codeBlockContainer_2jEK"><div class="codeBlockContent_115_ typescript"><div tabindex="0" class="prism-code language-typescript codeBlock_1XLE thin-scrollbar"><div class="codeBlockLines_2ir3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Mugshot</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;mugshot&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">WebdriverIOAdapter</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@mugshot/webdriverio&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> remote </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;webdriverio&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;GitHub project page should look the same&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 1. Open the browser.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> browser </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">remote</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    hostname</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;localhost&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    capabilities</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> browserName</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;chrome&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 2. Navigate to the page you want to test.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> browser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;https://github.com/NiGhTTraX/mugshot&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 3. Set up mugshot.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> mugshot </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">Mugshot</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">WebdriverIOAdapter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">browser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;screenshots&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 4. Take the screenshot.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> result </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> mugshot</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;project page&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 5. Check the result.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">expect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">matches</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">toBeTruthy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_3nrq">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_b0Ka" id="setup"></a>Setup<a class="hash-link" href="#setup" title="Direct link to heading">#</a></h2><p>Mugshot can be setup in a &quot;basic&quot; mode, or an &quot;advanced&quot; mode.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_b0Ka" id="basic-mode"></a>Basic mode<a class="hash-link" href="#basic-mode" title="Direct link to heading">#</a></h3><p>In this mode Mugshot automatically chooses sane implementations of its various pluggable subsystems and has a simpler constructor signature:</p><ul><li>taking screenshots: <a href="/mugshot/api/classes/mugshot.webdriverscreenshotter">WebdriverScreenshotter</a> with <a href="/mugshot/api/interfaces/mugshot.webdriverscreenshotteroptions#disableanimations"><code>{ disableAnimations: true }</code></a>; you need to choose one of the bundled <a href="/mugshot/installation#adapters">adapters</a> or pass in your own,</li><li>storing screenshots: <a href="/mugshot/api/classes/mugshot.fsstorage">FsStorage</a>,</li><li>diffing screenshots: <a href="/mugshot/api/classes/mugshot.pixeldiffer">PixelDiffer</a>,</li><li>processing screenshots: <a href="/mugshot/api/classes/mugshot.jimpprocessor">JimpProcessor</a>.</li></ul><div class="codeBlockContainer_2jEK"><div class="codeBlockContent_115_ typescript"><div tabindex="0" class="prism-code language-typescript codeBlock_1XLE thin-scrollbar"><div class="codeBlockLines_2ir3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Mugshot</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;mugshot&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">WebdriverIOAdapter</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@mugshot/webdriverio&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> remote </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;webdriverio&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> browser </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">remote</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  hostname</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;localhost&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  capabilities</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> browserName</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;chrome&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> mugshot </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">Mugshot</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">WebdriverIOAdapter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">browser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;./screenshots&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_3nrq">Copy</button></div></div><p>If you need to pass in any options to the default implementations, or you want to plug in your own, use the advanced constructor.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_b0Ka" id="advanced-mode"></a>Advanced mode<a class="hash-link" href="#advanced-mode" title="Direct link to heading">#</a></h3><p>In this mode you can choose any of the bundled subsystem implementations and customize them as you see fit, or even provide your own implementations.</p><div class="codeBlockContainer_2jEK"><div class="codeBlockContent_115_ typescript"><div tabindex="0" class="prism-code language-typescript codeBlock_1XLE thin-scrollbar"><div class="codeBlockLines_2ir3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token imports">  </span><span class="token imports maybe-class-name">Mugshot</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token imports"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token imports">  </span><span class="token imports maybe-class-name">WebdriverScreenshotter</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token imports"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token imports">  </span><span class="token imports maybe-class-name">FsStorage</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token imports"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token imports">  </span><span class="token imports maybe-class-name">JimpProcessor</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token imports"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token imports">  </span><span class="token imports maybe-class-name">PixelDiffer</span><span class="token imports"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token imports"></span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;mugshot&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">WebdriverIOAdapter</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@mugshot/webdriverio&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> remote </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;webdriverio&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> browser </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">remote</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  hostname</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;localhost&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  capabilities</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> browserName</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;chrome&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> mugshot </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">Mugshot</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">WebdriverScreenshotter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">WebdriverIOAdapter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">browser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       pngProcessor</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">JimpProcessor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">FsStorage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;screenshots&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pngDiffer</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">PixelDiffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> threshhold</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0.1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    createMissingBaselines</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_3nrq">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_b0Ka" id="taking-screenshots"></a>Taking screenshots<a class="hash-link" href="#taking-screenshots" title="Direct link to heading">#</a></h2><p>Mugshot doesn&#x27;t care where the screenshots are coming from, as long as they&#x27;re in <strong>PNG</strong> format. By default it ships with a <a href="/mugshot/api/classes/mugshot.webdriverscreenshotter">webdriver screenshotter</a>, but you can pass in your own implementation. See the <a href="/mugshot/api/interfaces/mugshot.screenshotter">Screenshotter</a> interface for more details.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_b0Ka" id="taking-a-screenshot-of-a-single-element"></a>Taking a screenshot of a single element<a class="hash-link" href="#taking-a-screenshot-of-a-single-element" title="Direct link to heading">#</a></h3><p>A <a href="/mugshot/api/types/mugshot.mugshotselector">selector</a> can be passed as the second argument to <a href="/mugshot/api/classes/mugshot.mugshot-1#check"><code>Mugshot.check</code></a> and will tell Mugshot to only screenshot the corresponding element. How the element is selected depends on the <a href="/mugshot/api/interfaces/mugshot.screenshotter">Screenshotter</a> implementation. For example, using the <a href="/mugshot/api/classes/mugshot.webdriverscreenshotter">WebdriverScreenshotter</a>, the element will be cropped out of the viewport according to its bounding rectangle.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_b0Ka" id="ignoring-elements"></a>Ignoring elements<a class="hash-link" href="#ignoring-elements" title="Direct link to heading">#</a></h3><p>You can ignore elements on the page by passing a <a href="/mugshot/api/types/mugshot.mugshotselector">selector</a> through the <a href="/mugshot/api/interfaces/mugshot.screenshotoptions#ignore"><code>ignore</code></a> option. The elements identified by that selector will be painted with the <a href="/mugshot/api/interfaces/mugshot.screenshotoptions#ignorecolor"><code>ignoreColor</code></a> (defaults to <code>#000</code>) before taking any screenshots.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_b0Ka" id="storing-screenshots"></a>Storing screenshots<a class="hash-link" href="#storing-screenshots" title="Direct link to heading">#</a></h3><p>Screenshots are taken in <strong>PNG</strong> format and how they&#x27;re stored is controlled by the <a href="/mugshot/api/interfaces/mugshot.screenshotstorage"><code>ScreenshotStorage</code></a> interface. Mugshot ships with a <a href="/mugshot/api/classes/mugshot.fsstorage">local file system implementation</a>, but you could easily plug in e.g. a cloud storage implementation.</p><p>Regardless of how they&#x27;re stored, Mugshot will produce up to 3 screenshots:</p><ol><li>A baseline screenshot. Think of it as a snapshot - how you expect your page/element to look.</li><li>The current screenshot. Mugshot will always take a new screenshot each time it&#x27;s called and compare it to the baseline. If they match, the new screenshot is discarded, otherwise it&#x27;s saved to the storage.</li><li>A diff. If the baseline and current screenshot are different then a diff highlighting the differences will be created and saved to the storage.</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_b0Ka" id="diffing-screenshots"></a>Diffing screenshots<a class="hash-link" href="#diffing-screenshots" title="Direct link to heading">#</a></h2><p>You can customize how diffs are produced by passing in a <a href="/mugshot/api/interfaces/mugshot.pngdiffer"><code>PNGDiffer</code></a> instance when instantiating <a href="/mugshot/api/classes/mugshot.mugshot-1"><code>Mugshot</code></a>. Mugshot ships with <a href="/mugshot/api/classes/mugshot.pixeldiffer"><code>PixelDiffer</code></a> that compares screenshots pixels by pixels and marks the differing ones with a color.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_b0Ka" id="reducing-flakiness"></a>Reducing flakiness<a class="hash-link" href="#reducing-flakiness" title="Direct link to heading">#</a></h3><p>A frequent source of flakiness in visual tests is dynamic data e.g. the current time and date or live API data. You can ignore elements that contain such data by painting over them with a solid color square. See the <a href="#ignoring-elements">ignore option</a> for more details.</p><p>Other common sources are animations and the blinking cursor in input fields. If you&#x27;re using the <a href="/mugshot/api/classes/mugshot.webdriverscreenshotter"><code>WebdriverScreenshotter</code></a> you can turn them off by passing the <a href="/mugshot/api/interfaces/mugshot.webdriverscreenshotteroptions#disableanimations"><code>disableAnimations</code> flag</a>.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/nighttrax/mugshot/edit/master/packages/website/docs/usage.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2nOl" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/mugshot/installation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Installation</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2Tf- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#setup" class="table-of-contents__link">Setup</a><ul><li><a href="#basic-mode" class="table-of-contents__link">Basic mode</a></li><li><a href="#advanced-mode" class="table-of-contents__link">Advanced mode</a></li></ul></li><li><a href="#taking-screenshots" class="table-of-contents__link">Taking screenshots</a><ul><li><a href="#taking-a-screenshot-of-a-single-element" class="table-of-contents__link">Taking a screenshot of a single element</a></li><li><a href="#ignoring-elements" class="table-of-contents__link">Ignoring elements</a></li><li><a href="#storing-screenshots" class="table-of-contents__link">Storing screenshots</a></li></ul></li><li><a href="#diffing-screenshots" class="table-of-contents__link">Diffing screenshots</a><ul><li><a href="#reducing-flakiness" class="table-of-contents__link">Reducing flakiness</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Andrei Picus. Built with Docusaurus.</div></div></div></footer></div>
<script src="/mugshot/assets/js/styles.0c8619d4.js"></script>
<script src="/mugshot/assets/js/runtime~main.8df49d41.js"></script>
<script src="/mugshot/assets/js/main.aece6680.js"></script>
<script src="/mugshot/assets/js/1.82488164.js"></script>
<script src="/mugshot/assets/js/2.3f3ff382.js"></script>
<script src="/mugshot/assets/js/58.7d36461d.js"></script>
<script src="/mugshot/assets/js/935f2afb.f52722d2.js"></script>
<script src="/mugshot/assets/js/17896441.8570ccdb.js"></script>
<script src="/mugshot/assets/js/6476eba6.08f5cd33.js"></script>
</body>
</html>