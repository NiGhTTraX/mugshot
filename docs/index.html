<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Mugshot</title>
	<meta name="description" content="Documentation for Mugshot">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<link rel="stylesheet" href="assets/css/pages.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">Mugshot</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1>Mugshot</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<!-- DUPLICATED in README.md. Please keep in sync. -->
				<p><img src="media/logo.png" alt="logo"></p>
				<!--suppress HtmlDeprecatedAttribute -->
				<div align="center">
					<h2>Framework independent visual testing library</h2>
					<p><a href="https://travis-ci.com/NiGhTTraX/mugshot"><img src="https://travis-ci.com/NiGhTTraX/mugshot.svg?branch=master" alt="Build Status"></a> <a href="https://codecov.io/gh/NiGhTTraX/mugshot"><img src="https://codecov.io/gh/NiGhTTraX/mugshot/branch/master/graph/badge.svg" alt="codecov"></a> <img src="https://img.shields.io/npm/types/mugshot.svg" alt="npm type definitions"></p>
				</div>
				<hr>
				<p>Mugshot is a node library for doing visual regression testing. The way screenshots are taken, processed, compared and stored is entirely customizable. You can use it to write visual regression tests for websites, mobile apps, native apps etc. Moreover, Mugshot doesn&#39;t impose any preferences on how you write or execute the tests, it just gives you an assertion that you can call however and whenever you want.</p>
				<!-- END OF COMMON CONENT -->
				<hr>
				<!-- START doctoc generated TOC please keep comment here to allow auto update -->
				<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
				<p><strong>Table of content</strong></p>
				<ul>
					<li><a href="#installation">Installation</a></li>
					<li><a href="#how-to-read-these-docs">How to read these docs</a></li>
					<li><a href="#getting-started">Getting started</a></li>
					<li><a href="#taking-screenshots">Taking screenshots</a><ul>
							<li><a href="#taking-a-screenshot-of-a-single-element">Taking a screenshot of a single element</a></li>
							<li><a href="#ignoring-elements">Ignoring elements</a></li>
							<li><a href="#storing-screenshots">Storing screenshots</a></li>
						</ul>
					</li>
					<li><a href="#diffing-screenshots">Diffing screenshots</a><ul>
							<li><a href="#reducing-flakiness">Reducing flakiness</a></li>
						</ul>
					</li>
				</ul>
				<!-- END doctoc generated TOC please keep comment here to allow auto update -->
				<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
					<h2>Installation</h2>
				</a>
				<!-- DUPLICATED in README.md. Please keep in sync. -->
				<pre><code class="language-shell">npm install --save-dev mugshot</code></pre>
				<p>Or alternatively with yarn</p>
				<pre><code class="language-shell">yarn add -D mugshot</code></pre>
				<p>Depending on how you want to take screenshots, you&#39;ll need a <a href="./interfaces/screenshotter.html"><code>Screenshotter</code></a> implementation. Mugshot bundles a <a href="./classes/webdriverscreenshotter.html"><code>WebdriverScreenshotter</code></a> that you can use with Webdriver compatible clients e.g. <a href="https://selenium.dev/">Selenium</a> or <a href="http://appium.io/">Appium</a>. Each client might need an adapter that translates its API to the interface that Mugshot expects. The following adapters are available:</p>
				<!-- END OF COMMON CONTENT -->
				<!-- Table also present in README.md; the links here point to . -->
				<table>
					<thead>
						<tr>
							<th>Package</th>
							<th>Version</th>
						</tr>
					</thead>
					<tbody><tr>
							<td><a href="./pages/adapters/webdriverio.html">@mugshot/webdriverio</a></td>
							<td><img src="https://img.shields.io/npm/v/@mugshot/webdriverio.svg" alt="npm"></td>
						</tr>
						<tr>
							<td><a href="./pages/adapters/puppeteer.html">@mugshot/puppeteer</a></td>
							<td><img src="https://img.shields.io/npm/v/@mugshot/puppeteer.svg" alt="npm"></td>
						</tr>
						<tr>
							<td><a href="./pages/adapters/playwright.html">@mugshot/playwright</a></td>
							<td><img src="https://img.shields.io/npm/v/@mugshot/playwright.svg" alt="npm"></td>
						</tr>
				</tbody></table>
				<p>If none of the provided adapters suit you, you can just roll your own by implementing the <a href="./interfaces/webdriver.html"><code>Webdriver</code> interface</a>. To validate your implementation you can use the <a href="./packages/contracts">contract tests package</a>.</p>
				<a href="#how-to-read-these-docs" id="how-to-read-these-docs" style="color: inherit; text-decoration: none;">
					<h2>How to read these docs</h2>
				</a>
				<p>Docs are generated from the commented codebase using <a href="https://typedoc.org/">typedoc</a>. A good place to start navigating them is the main <a href="./classes/mugshot.html"><code>Mughsot</code> class docs</a>. You can also use the search function in the top bar.</p>
				<a href="#getting-started" id="getting-started" style="color: inherit; text-decoration: none;">
					<h2>Getting started</h2>
				</a>
				<p>If you have an existing testing suite then it will be straightforward to add Mugshot to it. If you&#39;re starting from scratch then you can choose your favorite tools, Mugshot doesn&#39;t impose anything on you like a test runner or a particular way to write the tests.</p>
				<p>Mugshot expects you to setup the testing environment. For instance, if you&#39;re planning to take screenshots of a website then you need to</p>
				<ol>
					<li>Open the browser.</li>
					<li>Navigate to the website you want to test.</li>
					<li>Interact with the UI (scroll, click a button, input some text in a form etc.).</li>
				</ol>
				<p>Once everything is set you just call <a href="./classes/mugshot.html#check"><code>Mugshot.check</code></a> and Mugshot will take care of taking a new screenshot, comparing it to the baseline, producing diffs and returning a passing or a failing result.</p>
				<p>The following example illustrates the basics. It uses <a href="https://webdriver.io/">WebdriverIO</a> to control a browser and <a href="https://jestjs.io/">Jest</a> to run the test:</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> Mugshot, {
  FsStorage,
  WebdriverScreenshotter,
} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;mugshot&#x27;</span>;
<span class="hljs-keyword">import</span> WebdriverIOAdapter <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@mugshot/webdriverio&#x27;</span>;
<span class="hljs-keyword">import</span> { remote } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;webdriverio&#x27;</span>;

test(<span class="hljs-string">&#x27;GitHub project page should look the same&#x27;</span>, <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-comment">// 1. Open the browser.</span>
  <span class="hljs-keyword">const</span> browser = <span class="hljs-keyword">await</span> remote({
    hostname: <span class="hljs-string">&#x27;localhost&#x27;</span>,
    capabilities: { browserName: <span class="hljs-string">&#x27;chrome&#x27;</span> }
  });

  <span class="hljs-comment">// 2. Navigate to the page you want to test.</span>
  <span class="hljs-keyword">await</span> browser.url(<span class="hljs-string">&#x27;https://github.com/NiGhTTraX/mugshot&#x27;</span>);

  <span class="hljs-comment">// 3. Call mugshot.</span>
  <span class="hljs-keyword">const</span> mugshot = <span class="hljs-keyword">new</span> Mugshot(
    <span class="hljs-keyword">new</span> WebdriverScreenshotter(
      <span class="hljs-keyword">new</span> WebdriverIOAdapter(browser)
    ),
    <span class="hljs-keyword">new</span> FsStorage(<span class="hljs-string">&#x27;./screenshots&#x27;</span>)
  );

  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> mugshot.check(<span class="hljs-string">&#x27;project page&#x27;</span>);

  <span class="hljs-comment">// 4. Check the result.</span>
  expect(result.matches).toBeTruthy();
});</code></pre>
				<a href="#taking-screenshots" id="taking-screenshots" style="color: inherit; text-decoration: none;">
					<h2>Taking screenshots</h2>
				</a>
				<p>Mugshot doesn&#39;t care where the screenshots are coming from, as long as they&#39;re in <strong>PNG</strong> format. By default it ships with a <a href="./classes/webdriverscreenshotter.html">webdriver screenshotter</a>, but you can pass in your own implementation. See the <a href="./interfaces/screenshotter.html">Screenshotter</a> interface for more details.</p>
				<a href="#taking-a-screenshot-of-a-single-element" id="taking-a-screenshot-of-a-single-element" style="color: inherit; text-decoration: none;">
					<h3>Taking a screenshot of a single element</h3>
				</a>
				<p>A <a href="./globals.html#mugshotselector">selector</a> can be passed as the second argument to <a href="./classes/mugshot.html#check"><code>Mugshot.check</code></a> and will tell Mugshot to only screenshot the corresponding element. How the element is selected depends on the <a href="./interfaces/screenshotter.html">Screenshotter</a> implementation. For example, using the <a href="./classes/webdriverscreenshotter.html">WebdriverScreenshotter</a>, the element will be cropped out of the viewport according to its bounding rectangle.</p>
				<a href="#ignoring-elements" id="ignoring-elements" style="color: inherit; text-decoration: none;">
					<h3>Ignoring elements</h3>
				</a>
				<p>You can ignore elements on the page by passing a <a href="./globals.html#mugshotselector">selector</a> through the <code>ignore</code> option. The elements identified by that selector will be painted black before taking any screenshots.</p>
				<a href="#storing-screenshots" id="storing-screenshots" style="color: inherit; text-decoration: none;">
					<h3>Storing screenshots</h3>
				</a>
				<p>Screenshots are taken in <strong>PNG</strong> format and how they&#39;re stored is controlled by the <a href="./interfaces/screenshotstorage.html"><code>ScreenshotStorage</code></a> interface. Mugshot ships with a <a href="./classes/fsstorage.html">local file system implementation</a>, but you could easily plug in e.g. a cloud storage implementation.</p>
				<p>Regardless of how they&#39;re stored, Mugshot will produce up to 3 screenshots:</p>
				<ol>
					<li>A baseline screenshot. Think of it as a snapshot - how you expect your page/element to look.</li>
					<li>The current screenshot. Mugshot will always take a new screenshot each time it&#39;s called and compare it to the baseline. If they match, the new screenshot is discarded, otherwise it&#39;s saved to the storage.</li>
					<li>A diff. If the baseline and current screenshot are different then a diff highlighting the differences will be created and saved to the storage.</li>
				</ol>
				<a href="#diffing-screenshots" id="diffing-screenshots" style="color: inherit; text-decoration: none;">
					<h2>Diffing screenshots</h2>
				</a>
				<p>You can customize how diffs are produced by passing in a <a href="./interfaces/pngdiffer.html"><code>PNGDiffer</code></a> instance when instantiating <a href="./classes/mugshot.html"><code>Mugshot</code></a>. Mugshot ships with <a href="./classes/pixeldiffer.html"><code>PixelDiffer</code></a> that compares screenshots pixels by pixels and marks the differing ones with a color.</p>
				<a href="#reducing-flakiness" id="reducing-flakiness" style="color: inherit; text-decoration: none;">
					<h3>Reducing flakiness</h3>
				</a>
				<p>A frequent source of flakiness in visual tests is dynamic data e.g. the current time and date or live API data. You can ignore elements that contain such data by painting over them with a solid color square. See the <a href="#ignoring-elements">ignore option</a> for more details.</p>
				<p>Other common sources are animations and the blinking cursor in input fields. If you&#39;re using the <a href="./classes/webdriverscreenshotter.html"><code>WebdriverScreenshotter</code></a> you can turn them off by passing the <a href="./interfaces/webdriverscreenshotteroptions.html#disableanimations"><code>disableAnimations</code> flag</a>.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="label pp-nav pp-group">
						<span>Adapters</span>
					</li>
					<li class=" pp-nav pp-page">
						<a href="pages/adapters/webdriverio.html">WebdriverIO</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="pages/adapters/puppeteer.html">Puppeteer</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="pages/adapters/playwright.html">Playwright</a>
					</li>
					<li class="label pp-nav pp-group">
						<span>API</span>
					</li>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-enum">
						<a href="enums/fixture.html" class="tsd-kind-icon">Fixture</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/elementnotfounderror.html" class="tsd-kind-icon">Element<wbr>Not<wbr>Found<wbr>Error</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/elementnotvisibleerror.html" class="tsd-kind-icon">Element<wbr>Not<wbr>Visible<wbr>Error</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/fsstorage.html" class="tsd-kind-icon">Fs<wbr>Storage</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/jimpprocessor.html" class="tsd-kind-icon">Jimp<wbr>Processor</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/mugshot.html" class="tsd-kind-icon">Mugshot</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/mugshotmissingbaselineerror.html" class="tsd-kind-icon">Mugshot<wbr>Missing<wbr>Baseline<wbr>Error</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/outofboundserror.html" class="tsd-kind-icon">Out<wbr>OfBounds<wbr>Error</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/pixeldiffer.html" class="tsd-kind-icon">Pixel<wbr>Differ</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/playwrightadapter.html" class="tsd-kind-icon">Playwright<wbr>Adapter</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/puppeteeradapter.html" class="tsd-kind-icon">Puppeteer<wbr>Adapter</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/toomanyelementserror.html" class="tsd-kind-icon">Too<wbr>Many<wbr>Elements<wbr>Error</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/webdriverioadapter.html" class="tsd-kind-icon">WebdriverIOAdapter</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/webdriverscreenshotter.html" class="tsd-kind-icon">Webdriver<wbr>Screenshotter</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/color.html" class="tsd-kind-icon">Color</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/difffailingresult.html" class="tsd-kind-icon">Diff<wbr>Failing<wbr>Result</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/diffpassingresult.html" class="tsd-kind-icon">Diff<wbr>Passing<wbr>Result</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/elementrect.html" class="tsd-kind-icon">Element<wbr>Rect</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/mugshotdiffresult.html" class="tsd-kind-icon">Mugshot<wbr>Diff<wbr>Result</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/mugshotidenticalresult.html" class="tsd-kind-icon">Mugshot<wbr>Identical<wbr>Result</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/mugshotoptions.html" class="tsd-kind-icon">Mugshot<wbr>Options</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/pngdiffer.html" class="tsd-kind-icon">PNGDiffer</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/pngprocessor.html" class="tsd-kind-icon">PNGProcessor</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/pixeldifferoptions.html" class="tsd-kind-icon">Pixel<wbr>Differ<wbr>Options</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/screenshotoptions.html" class="tsd-kind-icon">Screenshot<wbr>Options</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/screenshotstorage.html" class="tsd-kind-icon">Screenshot<wbr>Storage</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/screenshotter.html" class="tsd-kind-icon">Screenshotter</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/testclient.html" class="tsd-kind-icon">Test<wbr>Client</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/webdriver.html" class="tsd-kind-icon">Webdriver</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/webdrivercontracttest.html" class="tsd-kind-icon">Webdriver<wbr>Contract<wbr>Test</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/webdriverscreenshotteroptions.html" class="tsd-kind-icon">Webdriver<wbr>Screenshotter<wbr>Options</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#diffresult" class="tsd-kind-icon">Diff<wbr>Result</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#elementselector" class="tsd-kind-icon">Element<wbr>Selector</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#mugshotresult" class="tsd-kind-icon">Mugshot<wbr>Result</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#mugshotselector" class="tsd-kind-icon">Mugshot<wbr>Selector</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#webdriverexecutecontracttests" class="tsd-kind-icon">webdriver<wbr>Execute<wbr>Contract<wbr>Tests</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#webdrivergetelementrectcontracttests" class="tsd-kind-icon">webdriver<wbr>Get<wbr>Element<wbr>Rect<wbr>Contract<wbr>Tests</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#webdrivertakescreenshotcontracttests" class="tsd-kind-icon">webdriver<wbr>Take<wbr>Screenshot<wbr>Contract<wbr>Tests</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#webdriverviewportcontracttests" class="tsd-kind-icon">webdriver<wbr>Viewport<wbr>Contract<wbr>Tests</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#createfixture" class="tsd-kind-icon">create<wbr>Fixture</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#expectidenticalscreenshots" class="tsd-kind-icon">expect<wbr>Identical<wbr>Screenshots</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#getboundingrect" class="tsd-kind-icon">get<wbr>Bounding<wbr>Rect</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#getclientchromesize" class="tsd-kind-icon">get<wbr>Client<wbr>Chrome<wbr>Size</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#injectanimationdisablingstylesheet" class="tsd-kind-icon">inject<wbr>Animation<wbr>Disabling<wbr>Stylesheet</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#loadfixture" class="tsd-kind-icon">load<wbr>Fixture</a>
					</li>
					<li class=" tsd-kind-object-literal">
						<a href="globals.html#webdrivercontractsuites" class="tsd-kind-icon">webdriver<wbr>Contract<wbr>Suites</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.json"><' + '/script>');</script>
</body>
</html>