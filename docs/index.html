<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Mugshot</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">Mugshot</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1> Mugshot</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<p><img src="media/logo.png" alt="logo"></p>
				<div align="center">
					<h2>Framework independent visual testing library</h2>
					<p><a href="https://travis-ci.com/NiGhTTraX/mugshot"><img src="https://travis-ci.com/NiGhTTraX/mugshot.svg?branch=master" alt="Build Status"></a> <a href="https://codecov.io/gh/NiGhTTraX/mugshot"><img src="https://codecov.io/gh/NiGhTTraX/mugshot/branch/master/graph/badge.svg" alt="codecov"></a> <img src="https://img.shields.io/npm/types/mugshot.svg" alt="npm type definitions"></p>
				</div>
				<hr>
				<p>Mugshot is a node library for doing visual regression testing. The way screenshots are taken, processed, compared and stored is entirely customizable. Moreover, Mugshot doesn&#39;t impose any preferences on how you write or execute the tests, it just gives you an assertion that you can call however and whenever you want.</p>
				<div align="center">
					<a href="http://nighttrax.github.io/mugshot">View API docs</a>
				</div>
				<hr>
				<!-- START doctoc generated TOC please keep comment here to allow auto update -->
				<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
				<p><strong>Table of content</strong></p>
				<ul>
					<li><a href="#features">Features</a></li>
					<li><a href="#installation">Installation</a></li>
					<li><a href="#intro">Intro</a></li>
					<li><a href="#basic-example">Basic example</a></li>
					<li><a href="#taking-screenshots">Taking screenshots</a><ul>
							<li><a href="#taking-a-screenshot-of-a-single-element">Taking a screenshot of a single element</a></li>
							<li><a href="#ignoring-elements">Ignoring elements</a></li>
							<li><a href="#storing-screenshots">Storing screenshots</a></li>
							<li><a href="#reducing-flakiness">Reducing flakiness</a></li>
						</ul>
					</li>
				</ul>
				<!-- END doctoc generated TOC please keep comment here to allow auto update -->
				<a href="#features" id="features" style="color: inherit; text-decoration: none;">
					<h2>Features</h2>
				</a>
				<ul>
					<li>Framework independent so you can choose your favorite tools or plug it into your existing testing suite.</li>
					<li>Produces diff images if a test fails.</li>
					<li>Throws on missing baselines (can be toggled through options).</li>
					<li>Everything is pluggable (screenshotter, differ, storage etc.).</li>
				</ul>
				<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
					<h2>Installation</h2>
				</a>
				<pre><code class="language-shell">npm install --save-dev mugshot</code></pre>
				<p>Or alternatively with yarn</p>
				<pre><code class="language-shell">yarn add -D mugshot</code></pre>
				<p>Depending on how you want to take screenshots, you&#39;ll need a <a href="http://nighttrax.github.io/mugshot/interfaces/screenshotter.html"><code>Screenshotter</code></a> implementation. Mugshot bundles a <a href="http://nighttrax.github.io/mugshot/classes/browserscreenshotter.html"><code>BrowserScreenshotter</code></a> that you can use with Webdriver compatible browsers. Each browser might need an adapter that translates its API to the interface that Mugshot expects. The following adapters are available:</p>
				<table>
					<thead>
						<tr>
							<th>Package</th>
							<th>Version</th>
						</tr>
					</thead>
					<tbody><tr>
							<td><a href="./packages/webdriverio">@mugshot/webdriverio</a></td>
							<td><img src="https://img.shields.io/npm/v/@mugshot/webdriverio.svg" alt="npm"></td>
						</tr>
						<tr>
							<td><a href="./packages/puppeteer">@mugshot/puppeteer</a></td>
							<td><img src="https://img.shields.io/npm/v/@mugshot/puppeteer.svg" alt="npm"></td>
						</tr>
				</tbody></table>
				<p>If none of the provided adapters suit you, you can just roll your own by implementing the <a href="http://nighttrax.github.io/mugshot/interfaces/browser.html"><code>Browser</code> interface</a>. To validate your implementation you can use the <a href="./packages/contracts">contract tests package</a>.</p>
				<a href="#intro" id="intro" style="color: inherit; text-decoration: none;">
					<h2>Intro</h2>
				</a>
				<p>Manually checking one component for unexpected visual changes is hard. Doing it across your entire UI is harder. Doing it in multiple browsers/devices is even harder. Making sure that everyone on your team does it is the hardest.</p>
				<p>Mugshot aims to automate that process. It offers a simple API that lets you compare an existing baseline screenshot with a fresh screenshot and make sure they&#39;re identical. If they&#39;re not you&#39;ll get a diff image highlighting the differences. You can then commit it as the new baseline if the changes are expected, or fix the code and rerun the tests.</p>
				<table>
					<thead>
						<tr>
							<th>Expected</th>
							<th>Actual</th>
							<th>Diff</th>
						</tr>
					</thead>
					<tbody><tr>
							<td><img src="media/expected.png" alt="expected"></td>
							<td><img src="media/actual.png" alt="actual"></td>
							<td><img src="media/diff.png" alt="diff"></td>
						</tr>
				</tbody></table>
				<p>If you have an existing testing suite then it will be straightforward to add Mugshot to it. If you&#39;re starting from scratch then you can choose your favorite tools, Mugshot doesn&#39;t impose anything on you like a test runner or a particular way to write the tests.</p>
				<p>You can think of Mugshot as providing an assertion - &quot;expect this part of the UI to look the same as last time&quot;. A visual test would typically look like:</p>
				<ol>
					<li>Open the app.</li>
					<li>Navigate to the screen you wish to check.</li>
					<li>Interact with the UI (scroll, click a button, input some text in a form etc.).</li>
					<li>Run the Mugshot assertion.</li>
				</ol>
				<p>The first 3 steps are fully in your control - you are responsible for setting the test up. Once everything is set you just call <a href="http://nighttrax.github.io/mugshot/classes/mugshot.html#check"><code>Mugshot.check</code></a> and Mugshot will take care of taking a new screenshot, comparing it to the baseline, producing diffs and returning a passing or a failing result.</p>
				<a href="#basic-example" id="basic-example" style="color: inherit; text-decoration: none;">
					<h2>Basic example</h2>
				</a>
				<p>Here is an example of a test that makes sure a website doesn&#39;t have any visual changes using <a href="https://webdriver.io/">WebdriverIO</a>:</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> Mugshot, {
  FsStorage,
  BrowserScreenshotter,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'mugshot'</span>;
<span class="hljs-keyword">import</span> WebdriverIOAdapter <span class="hljs-keyword">from</span> <span class="hljs-string">'@mugshot/webdriverio'</span>;
<span class="hljs-keyword">import</span> { remote } <span class="hljs-keyword">from</span> <span class="hljs-string">'webdriverio'</span>;

it(<span class="hljs-string">'GitHub project page should look the same'</span>, <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> browser = <span class="hljs-keyword">await</span> remote({
    hostname: <span class="hljs-string">'localhost'</span>,
    capabilities: { browserName: <span class="hljs-string">'chrome'</span> }
  });

  <span class="hljs-keyword">const</span> mugshot = <span class="hljs-keyword">new</span> Mugshot(
    <span class="hljs-keyword">new</span> BrowserScreenshotter(
      <span class="hljs-keyword">new</span> WebdriverIOAdapter(browser)
    ),
    <span class="hljs-keyword">new</span> FsStorage(<span class="hljs-string">'./screenshots'</span>)
  );

  <span class="hljs-keyword">await</span> browser.url(<span class="hljs-string">'https://github.com/NiGhTTraX/mugshot'</span>);

  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> mugshot.check(<span class="hljs-string">'project page'</span>);

  expect(result.matches).toBeTruthy();
});</code></pre>
				<a href="#taking-screenshots" id="taking-screenshots" style="color: inherit; text-decoration: none;">
					<h2>Taking screenshots</h2>
				</a>
				<p>Mugshot doesn&#39;t care where the screenshots are coming from, as long as they&#39;re in <strong>PNG</strong> format. By default it ships with a browser screenshotter, but you can plug your own implementation that either does things differently, or interacts with something other than a browser e.g. a mobile device. See the <a href="http://nighttrax.github.io/mugshot/interfaces/screenshotter.html">Screenshotter</a> interface for more details.</p>
				<a href="#taking-a-screenshot-of-a-single-element" id="taking-a-screenshot-of-a-single-element" style="color: inherit; text-decoration: none;">
					<h3>Taking a screenshot of a single element</h3>
				</a>
				<p>A selector can be passed as the second argument to <a href="http://nighttrax.github.io/mugshot/classes/mugshot.html#check"><code>Mugshot.check</code></a> and will tell Mugshot to only screenshot the corresponding element. How the element is selected depends on the <a href="http://nighttrax.github.io/mugshot/interfaces/screenshotter.html">Screenshotter</a> implementation. For example, using the <a href="http://nighttrax.github.io/mugshot/classes/browserscreenshotter.html">BrowserScreenshotter</a>, the element will be cropped out of the viewport according to its bounding rectangle.</p>
				<a href="#ignoring-elements" id="ignoring-elements" style="color: inherit; text-decoration: none;">
					<h3>Ignoring elements</h3>
				</a>
				<p>You can ignore elements on the page by passing a selector through the <code>ignore</code> option. The elements identified by that selector will be painted black before taking any screenshots.</p>
				<a href="#storing-screenshots" id="storing-screenshots" style="color: inherit; text-decoration: none;">
					<h3>Storing screenshots</h3>
				</a>
				<p>Screenshots are taken in <strong>PNG</strong> format and how they&#39;re stored is controlled by the <a href="http://nighttrax.github.io/mugshot/interfaces/screenshotstorage.html"><code>ScreenshotStorage</code></a> interface. Mugshot ships with a <a href="http://nighttrax.github.io/mugshot/classes/fsstorage.html">local file system implementation</a>, but you could easily plug in e.g. a cloud storage implementation.</p>
				<a href="#reducing-flakiness" id="reducing-flakiness" style="color: inherit; text-decoration: none;">
					<h3>Reducing flakiness</h3>
				</a>
				<p>A frequent source of flakiness in visual tests is dynamic data e.g. the current time and date or live API data. You can ignore elements that contain such data by painting over them with a solid color square. See the <a href="#ignoring-elements">ignore option</a> for more details.</p>
				<p>Other common sources are animations and the blinking cursor in input fields. If you&#39;re using the <a href="./docs/classes/browserscreenshotter.html"><code>BrowserScreenshotter</code></a> you can turn them off by passing the <a href="http://nighttrax.github.io/mugshot/interfaces/browserscreenshotteroptions.html#disableanimations"><code>disableAnimations</code> flag</a>.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-class">
						<a href="classes/browserscreenshotter.html" class="tsd-kind-icon">Browser<wbr>Screenshotter</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/elementnotfounderror.html" class="tsd-kind-icon">Element<wbr>Not<wbr>Found<wbr>Error</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/elementnotvisibleerror.html" class="tsd-kind-icon">Element<wbr>Not<wbr>Visible<wbr>Error</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/fsstorage.html" class="tsd-kind-icon">Fs<wbr>Storage</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/jimpprocessor.html" class="tsd-kind-icon">Jimp<wbr>Processor</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/mugshot.html" class="tsd-kind-icon">Mugshot</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/mugshotmissingbaselineerror.html" class="tsd-kind-icon">Mugshot<wbr>Missing<wbr>Baseline<wbr>Error</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/pixeldiffer.html" class="tsd-kind-icon">Pixel<wbr>Differ</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/puppeteeradapter.html" class="tsd-kind-icon">Puppeteer<wbr>Adapter</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/toomanyelementserror.html" class="tsd-kind-icon">Too<wbr>Many<wbr>Elements<wbr>Error</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/webdriverioadapter.html" class="tsd-kind-icon">WebdriverIOAdapter</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/browser.html" class="tsd-kind-icon">Browser</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/browsercontracttest.html" class="tsd-kind-icon">Browser<wbr>Contract<wbr>Test</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/browserscreenshotteroptions.html" class="tsd-kind-icon">Browser<wbr>Screenshotter<wbr>Options</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/color.html" class="tsd-kind-icon">Color</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/difffailingresult.html" class="tsd-kind-icon">Diff<wbr>Failing<wbr>Result</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/diffpassingresult.html" class="tsd-kind-icon">Diff<wbr>Passing<wbr>Result</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/elementrect.html" class="tsd-kind-icon">Element<wbr>Rect</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/mugshotdiffresult.html" class="tsd-kind-icon">Mugshot<wbr>Diff<wbr>Result</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/mugshotidenticalresult.html" class="tsd-kind-icon">Mugshot<wbr>Identical<wbr>Result</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/pngdiffer.html" class="tsd-kind-icon">PNGDiffer</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/pngprocessor.html" class="tsd-kind-icon">PNGProcessor</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/screenshotoptions.html" class="tsd-kind-icon">Screenshot<wbr>Options</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/screenshotstorage.html" class="tsd-kind-icon">Screenshot<wbr>Storage</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/screenshotter.html" class="tsd-kind-icon">Screenshotter</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/testbrowser.html" class="tsd-kind-icon">Test<wbr>Browser</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#diffresult" class="tsd-kind-icon">Diff<wbr>Result</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#mugshotresult" class="tsd-kind-icon">Mugshot<wbr>Result</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#mugshotselector" class="tsd-kind-icon">Mugshot<wbr>Selector</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="globals.html#browsercontracttests" class="tsd-kind-icon">browser<wbr>Contract<wbr>Tests</a>
					</li>
					<li class=" tsd-kind-object-literal">
						<a href="globals.html#fixtures" class="tsd-kind-icon">fixtures</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
				<li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>